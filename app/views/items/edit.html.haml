= render "users/header"

.contents
  = form_with model: @item, local: true do |f|
    .new-item-title
      %p 商品の情報を入力
    .new-item-outline
      .input-image
        .input-image__headline
          = f.label :images, "出品画像", class: 'input-image__headline--label'
          %span.input-image__headline--required 必須
        .input-image__comment 
          最大5枚までアップロードできます

          -# 画像投稿js機能
          .post__drop__box__container
            .prev-content

              - @item.images.each do |image|
                .preview-box
                  .upper-box
                    = image_tag image.images.to_s, width: "112", height: "112", alt: "preview"
                  .lower-box
                    .update-box
                      %label.edit-btn 編集
                    .delete-box
                      .delete-btn
                        %span 削除
            .label-content
              = f.label :"images_attributes_#{@item.images.length}_image", class: "label-box", id: "label-box--#{@item.images.length}" do
                %pre.label-box__text-visible クリックしてファイルをアップロード
            .hidden-content
              = f.fields_for :images do |i|
                = i.file_field :image, class: "hidden-field"
                = i.check_box:_destroy, class: "hidden-checkbox"

              - @item.images.length.upto(4) do |i|
                %input{name: "item[images_attributes][#{i}][image]", id: "item_images_attributes_#{i}_image", class:"hidden-field", type:"file"}
          -# 終わり
              
      .input-name
        .input-name__headline
          = f.label :name, "商品名", class: 'input-name__headline--label'
          %span.input-name__headline--required 必須
          = render "error_form", culumn: :name
        = f.text_field :name, placeholder: "40文字まで", class: 'input-name__text-field'

      .input-explanation
        .input-explanation__headline
          = f.label :explanation, "商品の説明", class: 'input-explanation__headline--label'
          %span.input-explanation__headline--required 必須
          = render "error_form", culumn: :explanation
        = f.text_area :explanation, placeholder: "1,000文字まで\n(色、素材、重さ、定価、注意点など)\n\n例）2015年ごろに3万円で購入したバッグです。ネイビーで傷はありません。", class: 'input-explanation__text-area'


    .new-item-details
      %p.new-item-details__category-name 商品の詳細

      .input-category
        .input-category__headline
          = f.label :category_id, "カテゴリー", class: 'input-category__headline--label'
          %span.input-category__headline--required 必須
          = render "error_form", culumn: :category
        = f.select :category_id, [ ["レディース", 1], ["メンズ", 2], ["ベビー・キッズ", 3], ["インテリア・住まい・小物", 4] ], {prompt: "選択してください"}, {class: 'input-category__select'}

      .input-brand
        .input-brand__headline
          = f.label :brand, "ブランド", class: 'input-brand__headline--label'
          %span.input-brand__headline--any 任意
        = f.text_field :brand, placeholder: "例）シャネル", class: 'input-brand__text-field'

      .input-size
        .input-size__headline
          = f.label :size, "商品のサイズ", class: 'input-size__headline--label'
          %span.input-size__headline--any 任意
        = f.text_field :size, placeholder: "例）S・M・L、27cmEEE、〇〇cm × 〇〇cm", class: 'input-size__text-field'

      .input-condition
        .input-condition__headline
          = f.label :condition, "商品の状態", class: 'input-condition__headline--label'
          %span.input-condition__headline--required 必須
        -# = from.collection_select(:condition, @conditions, :name, :name, {prompt: "選択してください"}, {class: 'input-condition__select'})
        = f.select :condition, [ "新品、未使用", "未使用品に近い", "目立った傷や汚れなし", "やや傷や汚れあり", "傷や汚れあり", "全体的に状態が悪い" ], {prompt: "選択してください"}, {class: 'input-condition__select'}


    .delivery
      %p.delivery__category-name 配送について

      .input-delivery-fee
        .input-delivery-fee__headline
          = f.label :delivery_fee_id, "配送料の負担", class: 'input-delivery-fee__headline--label'
          %span.input-delivery-fee__headline--required 必須
          = render "error_form", culumn: :delivery_fee_id
        = f.collection_select(:delivery_fee_id, @delivery_fees, :id, :name, {prompt: "選択してください"}, {class: 'input-delivery-fee__select'})
      
      .input-delivery-method
        .input-delivery-method__headline
          = f.label :delivery_method_id, "配送の方法", class: 'input-delivery-method__headline--label'
          %span.input-delivery-method__headline--required 必須
          = render "error_form", culumn: :delivery_method_id
        = f.collection_select(:delivery_method_id, @delivery_methods, :id, :name, {prompt: "選択してください"}, {class: 'input-delivery-method__select'})

      .input-delivery-prefecture
        .input-delivery-prefecture__headline
          = f.label :prefecture_id, "配送元の地域", class: 'input-delivery-prefecture__headline--label'
          %span.input-delivery-prefecture__headline--required 必須
          = render "error_form", culumn: :prefecture_id
        = f.collection_select(:prefecture_id, @prefectures, :id, :name, {prompt: "選択してください"}, {class: 'input-delivery-prefecture__select'})

      .input-delivery-days
        .input-delivery-days__headline
          = f.label :day_id, "発送までの日数", class: 'input-delivery-days__headline--label'
          %span.input-delivery-days__headline--required 必須
          = render "error_form", culumn: :day_id
        = f.collection_select(:day_id, @days, :id, :name, {prompt: "選択してください"}, {class: 'input-delivery-days__select'})

    .price
      %p.price__category-name 価格 (¥300 〜 9,999,999)

      .input-price
        .input-price__headline
          = f.label :price, "販売価格", class: 'input-price__headline--label'
          %span.input-price__headline--required 必須
        = f.text_field :price, class: 'input-price__text-field'

    .submit
      %div
        = f.submit "出品する",class: "submit__btn"

= render "users/footer"